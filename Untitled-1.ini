#include <iostream>
#include <vector>
#include <iomanip>
#include <string>
using namespace std;

// 定义项目核心参数配置结构体（可根据实际场景调整）
struct ProjectConfig {
    int dailyDiners;          // 日均就餐人数（人）
    double perCapitaFoodCost;// 人均食材成本（元/人）
    int annualOperatingDays;  // 年运营天数（天）
    double wasteReductionRate;// 食物浪费减少率（%）
    int reducedStaffCount;    // 减少的专职人员数量（人）
    double staffAnnualSalary; // 人均年薪（万元/人）
    double hardwareCost;      // 硬件总投入（万元）
    double annualOpeCost;     // 年运维成本（万元）
    double policySubsidy;     // 可申报政策补贴（万元）
    int dailyActiveUsers;     // APP日均活跃用户（人）
    double perUserDerivative; // 人均年度衍生消费转化（元/人）
};

// 经济效益计算类
class EconomicBenefitCalculator {
private:
    ProjectConfig config;
    double foodWasteSavings; // 缓存食材节约收益，避免重复计算

    // 初始化缓存（确保只计算一次食材节约收益）
    void initFoodWasteSavings() {
        if (foodWasteSavings < 0) { // 首次调用时计算
            // 单日浪费节约成本 = 日均人数 * 人均食材成本 * 浪费减少率
            double dailySavings = config.dailyDiners * config.perCapitaFoodCost * (config.wasteReductionRate / 100.0);
            // 年度食材节约收益 = 单日节约 * 年运营天数
            foodWasteSavings = dailySavings * config.annualOperatingDays / 10000.0; // 转换为万元
            cout << "=== 食材浪费节约收益 ===" << endl;
            cout << "单日浪费节约成本：" << dailySavings << " 元" << endl;
            cout << "年度食材节约收益：" << fixed << setprecision(2) << foodWasteSavings << " 万元" << endl;
        }
    }

    // 1. 计算食材浪费节约收益（核心收益）
    double calculateFoodWasteSavings() {
        initFoodWasteSavings();
        return foodWasteSavings;
    }

    // 2. 计算人力成本优化收益
    double calculateStaffCostSavings() {
        // 年度人力节约 = 减少人数 * 人均年薪
        double annualStaffSavings = config.reducedStaffCount * config.staffAnnualSalary;
        cout << "\n=== 人力成本优化收益 ===" << endl;
        cout << "减少专职人员数量：" << config.reducedStaffCount << " 人" << endl;
        cout << "年度人力节约收益：" << fixed << setprecision(2) << annualStaffSavings << " 万元" << endl;
        return annualStaffSavings;
    }

    // 3. 计算运营效率提升间接收益（含库存周转、设备利用率等）
    double calculateOperationalEfficiencyBenefit() {
        // 基于项目预期“运营效率提升20%”，按食材节约收益的20%测算间接收益
        double efficiencyBenefit = calculateFoodWasteSavings() * 0.2;
        cout << "\n=== 运营效率提升间接收益 ===" << endl;
        cout << "年度效率提升收益：" << fixed << setprecision(2) << efficiencyBenefit << " 万元" << endl;
        return efficiencyBenefit;
    }

    // 4. 计算衍生收益（积分兑换、政策补贴、品牌合作）
    double calculateDerivativeBenefit() {
        // 积分兑换衍生收益 = 日均活跃用户 * 人均年度转化 / 10000（转换为万元）
        double pointDerivative = config.dailyActiveUsers * config.perUserDerivative / 10000.0;
        // 品牌合作收益（按10-20万元区间取中间值15万元）
        double brandCooperation = 15.0;
        // 总衍生收益 = 积分兑换 + 政策补贴 + 品牌合作
        double totalDerivative = pointDerivative + config.policySubsidy + brandCooperation;
        
        cout << "\n=== 衍生收益 ===" << endl;
        cout << "积分兑换衍生收益：" << fixed << setprecision(2) << pointDerivative << " 万元" << endl;
        cout << "政策补贴收益：" << fixed << setprecision(2) << config.policySubsidy << " 万元" << endl;
        cout << "品牌合作收益：" << fixed << setprecision(2) << brandCooperation << " 万元" << endl;
        cout << "年度总衍生收益：" << fixed << setprecision(2) << totalDerivative << " 万元" << endl;
        return totalDerivative;
    }

    // 5. 计算投入回报周期（ROI）
    double calculateROIPeriod() {
        // 总投入 = 硬件投入 + 首年运维成本
        double totalInvestment = config.hardwareCost + config.annualOpeCost;
        // 年度总收益 = 食材节约 + 人力节约 + 效率收益 + 衍生收益
        double annualTotalBenefit = calculateFoodWasteSavings() + calculateStaffCostSavings() 
                                  + calculateOperationalEfficiencyBenefit() + calculateDerivativeBenefit();
        // 回报周期 = 总投入 / 年度总收益（年）
        double roiPeriod = totalInvestment / annualTotalBenefit;
        
        cout << "\n=== 投入回报分析 ===" << endl;
        cout << "项目总投入（硬件+首年运维）：" << fixed << setprecision(2) << totalInvestment << " 万元" << endl;
        cout << "年度总经济效益：" << fixed << setprecision(2) << annualTotalBenefit << " 万元" << endl;
        cout << "投入回报周期：" << fixed << setprecision(2) << roiPeriod << " 年" << endl;
        return roiPeriod;
    }

public:
    // 构造函数：初始化项目参数（基于项目实际场景配置）
    EconomicBenefitCalculator() {
        // 初始化缓存变量为负数，标记未计算
        foodWasteSavings = -1.0;
        
        config.dailyDiners = 10000;          // 高校日均就餐1万人次
        config.perCapitaFoodCost = 15.0;     // 人均食材成本15元
        config.annualOperatingDays = 300;    // 年运营300天
        config.wasteReductionRate = 6.0;     // 食物浪费减少6%以上
        config.reducedStaffCount = 3;        // 减少3名专职人员（运营+数据统计）
        config.staffAnnualSalary = 7.0;      // 人均年薪7万元（取管理人员与统计人员均值）
        config.hardwareCost = 80.0;          // 硬件总投入80万元
        config.annualOpeCost = 10.0;         // 年运维成本10万元
        config.policySubsidy = 35.0;         // 政策补贴35万元（20-50万元区间中间值）
        config.dailyActiveUsers = 5000;      // APP日均活跃5000人
        config.perUserDerivative = 10.0;     // 人均年度衍生消费转化10元
    }

    // 执行完整经济效益计算
    void runCalculation() {
        cout << "==================== 超级智慧食堂项目经济效益测算 ====================" << endl;
        calculateFoodWasteSavings();
        calculateStaffCostSavings();
        calculateOperationalEfficiencyBenefit();
        calculateDerivativeBenefit();
        calculateROIPeriod();
        cout << "======================================================================" << endl;
    }
};

int main() {
    // 创建计算器实例并执行测算
    EconomicBenefitCalculator calculator;
    calculator.runCalculation();
    return 0;
}